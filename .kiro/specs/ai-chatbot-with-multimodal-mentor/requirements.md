# Requirements Document

## Introduction

이 프로젝트는 Next.js와 JavaScript를 사용하여 Ollama에 설치된 로컬 LLM과 Google Gemini API를 활용한 멀티모달 기능을 지원하는 AI 멘토 챗봇을 개발하는 것입니다. 사용자와의 대화를 SQLite 데이터베이스에 저장하고, MCP(Model Context Protocol)를 통해 LLM의 기능을 확장하며, 개인화된 멘토링 서비스를 제공합니다.

## Requirements

### Requirement 1

**User Story:** 사용자로서, 로컬 Ollama LLM과 Google Gemini 중에서 선택하여 대화할 수 있기를 원한다. 그래야 다양한 AI 모델의 장점을 활용할 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 챗봇 인터페이스에 접근하면 THEN 시스템은 사용 가능한 LLM 모델 목록(Ollama 모델들, Google Gemini)을 표시해야 한다
2. WHEN 사용자가 특정 모델을 선택하면 THEN 시스템은 해당 모델로 대화 세션을 시작해야 한다
3. WHEN 사용자가 대화 중에 모델을 변경하면 THEN 시스템은 기존 대화 컨텍스트를 유지하면서 새로운 모델로 전환해야 한다

### Requirement 2

**User Story:** 사용자로서, 텍스트뿐만 아니라 이미지, 음성 등 다양한 형태의 입력을 제공할 수 있기를 원한다. 그래야 더 풍부한 상호작용이 가능하다.

#### Acceptance Criteria

1. WHEN 사용자가 텍스트 메시지를 입력하면 THEN 시스템은 선택된 LLM을 통해 응답을 생성해야 한다
2. WHEN 사용자가 이미지를 업로드하면 THEN 시스템은 멀티모달 모델(Google Gemini)을 사용하여 이미지를 분석하고 응답해야 한다
3. WHEN 사용자가 음성 입력을 제공하면 THEN 시스템은 음성을 텍스트로 변환하고 LLM에 전달해야 한다
4. IF 선택된 모델이 멀티모달을 지원하지 않으면 THEN 시스템은 자동으로 Google Gemini로 전환하거나 사용자에게 알림을 표시해야 한다

### Requirement 3

**User Story:** 사용자로서, 모든 대화 내역이 안전하게 저장되기를 원한다. 그래야 이전 대화를 참조하고 연속성 있는 멘토링을 받을 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 메시지를 보내면 THEN 시스템은 사용자 메시지를 SQLite 데이터베이스에 저장해야 한다
2. WHEN AI가 응답을 생성하면 THEN 시스템은 AI 응답을 데이터베이스에 저장해야 한다
3. WHEN 사용자가 대화 기록을 요청하면 THEN 시스템은 저장된 대화 내역을 시간순으로 표시해야 한다
4. WHEN 시스템이 데이터베이스에 접근할 때 THEN 사용자 개인정보와 대화 내용이 암호화되어 저장되어야 한다

### Requirement 4

**User Story:** 사용자로서, MCP를 통해 확장된 AI 기능을 사용할 수 있기를 원한다. 그래야 단순한 대화를 넘어서 실용적인 도구로 활용할 수 있다.

#### Acceptance Criteria

1. WHEN 시스템이 시작되면 THEN MCP 서버들이 자동으로 연결되어야 한다
2. WHEN 사용자가 특정 작업을 요청하면 THEN AI는 적절한 MCP 도구를 선택하여 작업을 수행해야 한다
3. WHEN MCP 도구가 실행되면 THEN 실행 결과가 사용자에게 명확하게 표시되어야 한다
4. IF MCP 도구 실행이 실패하면 THEN 시스템은 오류 메시지와 함께 대안을 제시해야 한다

### Requirement 5

**User Story:** 사용자로서, 개인화된 멘토링을 받을 수 있기를 원한다. 그래야 나의 학습 목표와 진행 상황에 맞는 조언을 받을 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 처음 시스템을 사용하면 THEN 학습 목표, 관심 분야, 현재 수준을 설정할 수 있어야 한다
2. WHEN 사용자가 질문하면 THEN AI는 사용자의 프로필과 이전 대화 기록을 고려하여 개인화된 답변을 제공해야 한다
3. WHEN 사용자가 학습 진행 상황을 묻면 THEN 시스템은 대화 기록을 분석하여 진전 사항을 요약해야 한다
4. WHEN 사용자가 멘토링 세션을 요청하면 THEN AI는 구조화된 학습 계획과 단계별 가이드를 제공해야 한다

### Requirement 6

**User Story:** 사용자로서, Next.js 기반의 직관적이고 사용하기 쉬운 웹 인터페이스를 통해 챗봇과 상호작용하고 싶다. 그래야 기술적 복잡성에 신경 쓰지 않고 학습에 집중할 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 웹 애플리케이션에 접근하면 THEN Next.js로 구축된 깔끔하고 직관적인 채팅 인터페이스가 표시되어야 한다
2. WHEN 사용자가 메시지를 입력하면 THEN 실시간으로 타이핑 상태가 표시되어야 한다
3. WHEN AI가 응답을 생성하는 동안 THEN 로딩 인디케이터가 표시되어야 한다
4. WHEN 사용자가 설정을 변경하면 THEN 변경사항이 즉시 반영되고 저장되어야 한다

### Requirement 7

**User Story:** 사용자로서, AI 챗봇의 행동과 응답 스타일을 제어할 수 있는 기본 룰을 설정하고 싶다. 그래야 내 필요에 맞는 맞춤형 멘토링을 받을 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 룰 설정 페이지에 접근하면 THEN 다양한 룰 카테고리(응답 스타일, 전문 분야, 언어, 제한사항 등)를 설정할 수 있어야 한다
2. WHEN 사용자가 기본 룰을 설정하면 THEN 모든 AI 응답에 해당 룰이 적용되어야 한다
3. WHEN 사용자가 특정 대화에서 임시 룰을 설정하면 THEN 해당 대화에서만 임시 룰이 적용되어야 한다
4. WHEN AI가 응답을 생성할 때 THEN 설정된 룰을 프롬프트에 포함하여 일관된 응답을 제공해야 한다

### Requirement 8

**User Story:** 사용자로서, 이전 대화 기록을 쉽게 찾아보고 관리할 수 있는 히스토리 기능을 원한다. 그래야 과거 학습 내용을 복습하고 연속성 있는 학습을 할 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 히스토리 페이지에 접근하면 THEN 날짜별로 정리된 대화 세션 목록이 표시되어야 한다
2. WHEN 사용자가 특정 대화 세션을 선택하면 THEN 해당 세션의 전체 대화 내용이 표시되어야 한다
3. WHEN 사용자가 대화 기록을 검색하면 THEN 키워드를 포함한 대화들이 검색 결과로 표시되어야 한다
4. WHEN 사용자가 대화 세션을 삭제하면 THEN 해당 세션이 데이터베이스에서 완전히 제거되어야 한다
5. WHEN 사용자가 대화 기록을 내보내기하면 THEN JSON 또는 텍스트 형태로 다운로드할 수 있어야 한다

### Requirement 9

**User Story:** 사용자로서, ChatGPT의 GPTs처럼 특정 목적에 맞는 커스텀 AI 어시스턴트를 생성하고 관리할 수 있기를 원한다. 그래야 다양한 전문 분야별로 특화된 멘토를 만들어 사용할 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 새로운 GPT를 생성하면 THEN 이름, 설명, 전문 분야, 성격, 지시사항을 설정할 수 있어야 한다
2. WHEN 사용자가 GPT에 지식 베이스를 업로드하면 THEN 파일(PDF, 텍스트, 이미지)이 해당 GPT의 컨텍스트에 추가되어야 한다
3. WHEN 사용자가 특정 GPT를 선택하면 THEN 해당 GPT의 설정과 지식 베이스를 사용하여 대화가 시작되어야 한다
4. WHEN 사용자가 GPT 목록을 조회하면 THEN 생성된 모든 커스텀 GPT들이 카테고리별로 정리되어 표시되어야 한다
5. WHEN 사용자가 GPT를 공유하면 THEN 다른 사용자가 해당 GPT를 복사하여 사용할 수 있어야 한다

### Requirement 10

**User Story:** 사용자로서, RAG(Retrieval-Augmented Generation) 기능을 통해 업로드한 문서들을 기반으로 정확하고 맥락에 맞는 답변을 받고 싶다. 그래야 내 개인 문서나 전문 자료를 활용한 맞춤형 지식 기반 대화가 가능하다.

#### Acceptance Criteria

1. WHEN 사용자가 문서를 업로드하면 THEN 시스템은 문서를 청크 단위로 분할하고 벡터 임베딩으로 변환하여 저장해야 한다
2. WHEN 사용자가 질문하면 THEN 시스템은 질문과 관련된 문서 청크를 검색하여 컨텍스트로 제공해야 한다
3. WHEN AI가 답변을 생성할 때 THEN 검색된 문서 내용을 기반으로 답변하고 출처를 명시해야 한다
4. WHEN 사용자가 문서 기반 대화 모드를 선택하면 THEN 업로드된 문서들만을 지식 베이스로 사용해야 한다

### Requirement 11

**User Story:** 사용자로서, NotebookLM처럼 내 문서를 업로드하여 해당 문서의 내용에 대해서만 질문하고 답변받을 수 있는 기능을 원한다. 그래야 특정 문서나 자료에 대한 깊이 있는 분석과 이해가 가능하다.

#### Acceptance Criteria

1. WHEN 사용자가 문서 분석 모드를 선택하면 THEN 문서 업로드 인터페이스가 표시되어야 한다
2. WHEN 사용자가 문서(PDF, DOCX, TXT, MD)를 업로드하면 THEN 시스템은 문서 내용을 추출하고 분석 가능한 형태로 처리해야 한다
3. WHEN 사용자가 업로드된 문서에 대해 질문하면 THEN AI는 오직 해당 문서의 내용만을 기반으로 답변해야 한다
4. WHEN AI가 답변할 때 THEN 참조한 문서의 특정 부분(페이지, 섹션)을 인용하여 표시해야 한다
5. WHEN 사용자가 문서 요약을 요청하면 THEN 문서의 주요 내용을 구조화하여 요약 제공해야 한다

### Requirement 12

**User Story:** 사용자로서, AI가 생성한 코드, 문서, 차트 등을 바로 확인하고 편집할 수 있는 아티팩트 기능을 원한다. 그래야 생성된 결과물을 즉시 검토하고 수정하여 활용할 수 있다.

#### Acceptance Criteria

1. WHEN AI가 코드를 생성하면 THEN 별도의 아티팩트 패널에서 구문 강조와 함께 표시되어야 한다
2. WHEN AI가 문서나 마크다운을 생성하면 THEN 렌더링된 형태와 원본 텍스트를 모두 볼 수 있어야 한다
3. WHEN 사용자가 아티팩트를 편집하면 THEN 실시간으로 변경사항이 반영되어야 한다
4. WHEN 사용자가 아티팩트를 저장하면 THEN 파일로 다운로드하거나 클립보드에 복사할 수 있어야 한다
5. WHEN AI가 차트나 다이어그램을 생성하면 THEN Mermaid나 Chart.js를 사용하여 시각화되어야 한다

### Requirement 13

**User Story:** 사용자로서, 챗봇과의 대화를 통해 자동으로 맞춤형 멘토를 생성할 수 있는 기능을 원한다. 그래야 복잡한 설정 없이도 내 필요에 맞는 전문 멘토를 쉽게 만들 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 "멘토 생성" 모드를 선택하면 THEN AI가 사용자의 목표, 관심사, 학습 스타일에 대해 질문해야 한다
2. WHEN 사용자가 AI의 질문에 답변하면 THEN AI는 답변을 분석하여 최적의 멘토 프로필을 제안해야 한다
3. WHEN AI가 멘토 프로필을 생성하면 THEN 멘토의 전문 분야, 성격, 교육 방식, 커뮤니케이션 스타일이 자동으로 설정되어야 한다
4. WHEN 생성된 멘토가 완성되면 THEN 사용자는 해당 멘토와 즉시 대화를 시작할 수 있어야 한다
5. WHEN 사용자가 멘토와 대화하면서 피드백을 제공하면 THEN 멘토의 특성이 점진적으로 개선되어야 한다

### Requirement 14

**User Story:** 사용자로서, 멘토의 개인적 특징과 배경을 상세히 관리하고, 유튜브 영상이나 웹페이지를 통해 멘토의 배경지식을 풍부하게 하고 싶다. 그래야 더 현실적이고 전문적인 멘토링을 받을 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 멘토 프로필을 편집하면 THEN 성격, 말투, 전문 분야, 경력, 교육 철학 등을 세부적으로 설정할 수 있어야 한다
2. WHEN 사용자가 유튜브 URL을 입력하면 THEN 시스템은 영상의 자막이나 설명을 추출하여 멘토의 지식 베이스에 추가해야 한다
3. WHEN 사용자가 웹페이지 URL을 입력하면 THEN 시스템은 페이지 내용을 스크래핑하여 멘토의 배경지식으로 활용해야 한다
4. WHEN 멘토가 답변할 때 THEN 추가된 유튜브나 웹페이지 정보를 참조하여 더 풍부하고 구체적인 답변을 제공해야 한다
5. WHEN 사용자가 멘토의 지식 소스를 관리하면 THEN 추가된 유튜브 영상이나 웹페이지 목록을 확인하고 삭제할 수 있어야 한다

### Requirement 15

**User Story:** 사용자로서, MBTI 성격 유형을 기준으로 한 단순하고 직관적인 멘토 기능을 사용하고 싶다. 그래야 복잡한 설정 없이도 내 성격에 맞는 멘토링 스타일을 빠르게 선택할 수 있다.

#### Acceptance Criteria

1. WHEN 사용자가 MBTI 멘토 모드를 선택하면 THEN 16가지 MBTI 유형 중에서 선택할 수 있는 인터페이스가 표시되어야 한다
2. WHEN 사용자가 특정 MBTI 유형을 선택하면 THEN 해당 유형의 특성에 맞는 멘토 성격과 커뮤니케이션 스타일이 자동으로 적용되어야 한다
3. WHEN MBTI 기반 멘토가 답변할 때 THEN 선택된 성격 유형의 특징(내향/외향, 감각/직관, 사고/감정, 판단/인식)을 반영한 답변을 제공해야 한다
4. WHEN 사용자가 자신의 MBTI를 설정하면 THEN 멘토는 사용자의 성격 유형을 고려하여 맞춤형 조언을 제공해야 한다
5. WHEN 사용자가 MBTI 호환성을 확인하면 THEN 사용자와 멘토의 MBTI 조합에 따른 상호작용 팁을 제공해야 한다

### Requirement 16

**User Story:** 개발자로서, JavaScript와 Next.js를 사용하여 유지보수가 쉽고 확장 가능한 코드베이스를 원한다. 그래야 향후 기능 추가와 개선이 용이하다.

#### Acceptance Criteria

1. WHEN 프로젝트가 설정되면 THEN Next.js 프레임워크를 사용한 구조화된 프로젝트가 생성되어야 한다
2. WHEN 백엔드 API가 구현되면 THEN Next.js API Routes를 사용하여 서버리스 함수로 구현되어야 한다
3. WHEN 컴포넌트가 개발되면 THEN 재사용 가능한 React 컴포넌트로 작성되어야 한다
4. WHEN 데이터베이스 연결이 필요하면 THEN JavaScript로 작성된 데이터베이스 유틸리티를 사용해야 한다